

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>cs101audio &mdash; CS101 Audio 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=f2a433a1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CS101 Audio
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CS101 Audio</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">cs101audio</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for cs101audio</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A Pydub-based audio library for introductory computer science.</span>

<span class="sd">All files that use the CS101 Audio package must have the following line</span>
<span class="sd">at the top of the file:</span>

<span class="sd">from cs101audio import *</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydub</span><span class="w"> </span><span class="kn">import</span> <span class="n">AudioSegment</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydub.generators</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sine</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydub.generators</span><span class="w"> </span><span class="kn">import</span> <span class="n">Sawtooth</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydub.generators</span><span class="w"> </span><span class="kn">import</span> <span class="n">Square</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydub.generators</span><span class="w"> </span><span class="kn">import</span> <span class="n">Triangle</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydub.playback</span><span class="w"> </span><span class="kn">import</span> <span class="n">play</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">array</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span> <span class="c1"># For ignoring a PyDub warning that runs everytime you run your code</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Couldn&#39;t find ffmpeg or avconv - defaulting to ffmpeg, but may not work&quot;</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Couldn&#39;t find ffplay or avplay - defaulting to ffplay, but may not work&quot;</span><span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydub</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1"># For the Base AudioSegment Class</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydub.playback</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1"># For playing back audio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydub.generators</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span> <span class="c1"># For generating audio waves</span>

<span class="c1"># Imports for GUI plots</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tk</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="kn">import</span> <span class="n">messagebox</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.figure</span><span class="w"> </span><span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.backends.backend_tkagg</span><span class="w"> </span><span class="kn">import</span> <span class="n">FigureCanvasTkAgg</span>

<span class="n">MAX_AMPLITUDE</span> <span class="o">=</span> <span class="mi">32767</span>
<span class="n">MIN_AMPLITUDE</span> <span class="o">=</span> <span class="o">-</span><span class="mi">32768</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_check_type</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">target_type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if a parameter is of the correct type and raises a TypeError if not.</span>

<span class="sd">    Args:</span>
<span class="sd">        param (any): The parameter to check.</span>
<span class="sd">        param_name (str): The name of the parameter (for the error message).</span>
<span class="sd">        target_type (type): The expected type (e.g., int, str, Audio).</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If &#39;param&#39; is not an instance of &#39;target_type&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">target_type</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The parameter &#39;&quot;</span> <span class="o">+</span> <span class="n">param_name</span> <span class="o">+</span> <span class="s2">&quot;&#39; should be a &quot;</span> <span class="o">+</span>
                        <span class="nb">str</span><span class="p">(</span><span class="n">target_type</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">+</span>
                        <span class="s2">&quot; but instead was a &quot;</span> <span class="o">+</span>
                        <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">param</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                        <span class="n">param_name</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">param</span><span class="p">))</span>


<div class="viewcode-block" id="Audio">
<a class="viewcode-back" href="../api.html#cs101audio.Audio">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Audio</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrapper Class for the Pydub AudioSegment Class</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Audio.__init__">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">frame_rate</span><span class="o">=</span><span class="mi">44100</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a silent audio segment.</span>

<span class="sd">        Args:</span>
<span class="sd">            duration (int, optional): The length of the silent audio segment</span>
<span class="sd">                in milliseconds. Defaults to 0.</span>
<span class="sd">            frame_rate (int, optional): The frame rate in frames per second.</span>
<span class="sd">                Defaults to 44100.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="n">AudioSegment</span><span class="o">.</span><span class="n">silent</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span> <span class="n">frame_rate</span><span class="o">=</span><span class="n">frame_rate</span><span class="p">)</span></div>



<div class="viewcode-block" id="Audio.set_audioseg">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.set_audioseg">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_audioseg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newaudio</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the internal pydub.AudioSegment object.</span>

<span class="sd">        Args:</span>
<span class="sd">            newaudio (pydub.AudioSegment): The new audio segment to replace</span>
<span class="sd">                self._audioseg.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="n">newaudio</span></div>


<div class="viewcode-block" id="Audio.get_audioseg">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.get_audioseg">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_audioseg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the internal pydub.AudioSegment object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pydub.AudioSegment: The internal audio segment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span></div>


<div class="viewcode-block" id="Audio.get_sample_list">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.get_sample_list">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sample_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the audio data as a list of samples.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[int]: The list of audio samples.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">get_array_of_samples</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="Audio.get_frame_rate">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.get_frame_rate">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_frame_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the frame rate of the audio.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The frame rate in Hz (frames per second).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">frame_rate</span></div>


<div class="viewcode-block" id="Audio.__len__">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.__len__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the length of the audio in milliseconds.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The duration of the audio in milliseconds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="p">)</span></div>


<div class="viewcode-block" id="Audio.open_audio_file">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.open_audio_file">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">open_audio_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens an audio file and loads it into this Audio object.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): The path to the audio file to open.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: If the specified file does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">_check_type</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;filename&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">AudioSegment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;File &quot;</span> <span class="o">+</span> <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot; not found&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="n">AudioSegment</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></div>

        
        
<div class="viewcode-block" id="Audio.save_to_file">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.save_to_file">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the audio to a file.</span>

<span class="sd">        The file format is determined by the file extension (e.g., &quot;.wav&quot;, &quot;.mp3&quot;).</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): The name of the file to save to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">extendindex</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="n">file_extension</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[</span><span class="n">extendindex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span>
      
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">out_f</span><span class="o">=</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> \
                              <span class="nb">format</span><span class="o">=</span><span class="n">file_extension</span><span class="p">)</span></div>


<div class="viewcode-block" id="Audio.from_sample_list">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.from_sample_list">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_sample_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample_lst</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads audio data from a list of samples.</span>

<span class="sd">        This method uses metadata (like frame rate, sample width) from a</span>
<span class="sd">        template Audio object. If no template is provided, it uses its own</span>
<span class="sd">        current metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            sample_lst (list[int]): The list of samples to generate the audio from.</span>
<span class="sd">            template (Audio, optional): An Audio object to use as a template</span>
<span class="sd">                for metadata. Defaults to self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sample_lst</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">sample_lst</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="n">sample_lst</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="ow">not</span> <span class="n">template</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span>
            
        <span class="c1"># If an sample list is spliced, it may have a incorret total number of samples</span>
        <span class="c1"># When attempting to play this, an error occurs because the total sample</span>
        <span class="c1"># count is not a multiple of 4 and the number of channels</span>
        <span class="c1"># So if this occurs, we append 0s until it is a multiple</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_lst</span><span class="p">)</span> <span class="o">*</span> <span class="n">template</span><span class="o">.</span><span class="n">get_audioseg</span><span class="p">()</span><span class="o">.</span><span class="n">channels</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">sample_lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">get_audioseg</span><span class="p">()</span><span class="o">.</span><span class="n">_spawn</span><span class="p">(</span><span class="n">sample_lst</span><span class="p">)</span></div>


<div class="viewcode-block" id="Audio.from_generator">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.from_generator">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">wavetype</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a wave and loads it into this Audio object.</span>

<span class="sd">        Args:</span>
<span class="sd">            freq (int): The frequency of the wave to be generated (in Hz).</span>
<span class="sd">            duration (int): The duration of the wave (in milliseconds).</span>
<span class="sd">            wavetype (str): The type of wave (&quot;Sine&quot;, &quot;Square&quot;, &quot;Sawtooth&quot;,</span>
<span class="sd">                or &quot;Triangle&quot;). Case-insensitive.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If an invalid &#39;wavetype&#39; is provided.</span>
<span class="sd">            TypeError: If &#39;freq&#39; or &#39;duration&#39; are not ints, or &#39;wavetype&#39;</span>
<span class="sd">                is not a str.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">wavetype</span><span class="p">,</span> <span class="s2">&quot;wavetype&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="s2">&quot;freq&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_duration</span> <span class="o">=</span> <span class="n">duration</span>
        <span class="k">if</span> <span class="n">wavetype</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;SINE&quot;</span><span class="p">:</span>
            <span class="n">wave</span> <span class="o">=</span> <span class="n">Sine</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">wavetype</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;SAWTOOTH&quot;</span><span class="p">:</span>
            <span class="n">wave</span> <span class="o">=</span> <span class="n">Sawtooth</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">wavetype</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;SQUARE&quot;</span><span class="p">:</span>
            <span class="n">wave</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">wavetype</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;TRIANGLE&quot;</span><span class="p">:</span>
            <span class="n">wave</span> <span class="o">=</span> <span class="n">Triangle</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Error! Invalid Wavetype </span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">wavetype</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> passed to from_generator&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="n">wave</span><span class="o">.</span><span class="n">to_audio_segment</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span></div>

        <span class="c1">#self._audioseg = self._audioseg.fade_in(50).fade_out(100)</span>

<div class="viewcode-block" id="Audio.play">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.play">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plays the current audio segment, if it isn&#39;t empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">play</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="p">)</span></div>

            

<div class="viewcode-block" id="Audio.__add__">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.__add__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_audio</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates this audio with another. (Implements the + operator).</span>

<span class="sd">        Does not modify the original Audio objects.</span>

<span class="sd">        Args:</span>
<span class="sd">            other_audio (Audio): The audio object to append to the end of this one.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Audio: A new Audio object containing the concatenated audio.</span>
<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">_check_type</span><span class="p">(</span><span class="n">other_audio</span><span class="p">,</span> <span class="s2">&quot;other_audio&quot;</span><span class="p">,</span> <span class="n">Audio</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">Audio</span><span class="p">()</span>

        <span class="n">result</span><span class="o">.</span><span class="n">set_audioseg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">+</span> <span class="n">other_audio</span><span class="o">.</span><span class="n">get_audioseg</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Audio.__iadd__">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.__iadd__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_audio</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Concatenates another audio in-place. (Implements the += operator).</span>

<span class="sd">        Modifies this Audio object.</span>

<span class="sd">        Args:</span>
<span class="sd">            other_audio (Audio): The audio object to append.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Audio: self, modified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">other_audio</span><span class="p">,</span> <span class="s2">&quot;other_audio&quot;</span><span class="p">,</span> <span class="n">Audio</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">+=</span> <span class="n">other_audio</span><span class="o">.</span><span class="n">get_audioseg</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>



<div class="viewcode-block" id="Audio.__mul__">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.__mul__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loopnum</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Repeats (loops) the audio segment. (Implements the * operator).</span>

<span class="sd">        Does not modify the original Audio object.</span>

<span class="sd">        Args:</span>
<span class="sd">            loopnum (int): The number of times to repeat the audio.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Audio: A new Audio object containing the looped audio.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">loopnum</span><span class="p">,</span> <span class="s2">&quot;loopnum&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">Audio</span><span class="p">()</span>
        <span class="n">result</span><span class="o">.</span><span class="n">set_audioseg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">*</span> <span class="n">loopnum</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Audio.__imul__">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.__imul__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loopnum</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Repeats (loops) the audio segment in-place. (Implements the *= operator).</span>

<span class="sd">        Modifies this Audio object.</span>

<span class="sd">        Args:</span>
<span class="sd">            loopnum (int): The number of times to repeat the audio.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Audio: self, modified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">loopnum</span><span class="p">,</span> <span class="s2">&quot;loopnum&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">*=</span> <span class="n">loopnum</span>
        <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Audio.__getitem__">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.__getitem__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">millisecond</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets a slice of the audio. (Implements the [] operator).</span>

<span class="sd">        Args:</span>
<span class="sd">            millisecond (int or slice): The millisecond to index or a slice</span>
<span class="sd">                object (e.g., `slice(1000, 2000)` for 1s to 2s).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Audio: A new Audio object containing the specified slice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Audio</span><span class="p">()</span>
        <span class="n">result</span><span class="o">.</span><span class="n">set_audioseg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="p">[</span><span class="n">millisecond</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">result</span></div>



<div class="viewcode-block" id="Audio.overlay">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.overlay">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio2</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overlays (mixes) another audio onto this one.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            audio2 (Audio): The audio object to overlay.</span>
<span class="sd">            position (int, optional): The time in milliseconds at which to</span>
<span class="sd">                start the overlay. Defaults to 0.</span>
<span class="sd">            loop (bool, optional): If True, loops &#39;audio2&#39; to fill the</span>
<span class="sd">                duration of this audio. Defaults to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">overlay</span><span class="p">(</span><span class="n">audio2</span><span class="o">.</span><span class="n">get_audioseg</span><span class="p">(),</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="n">loop</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Audio.apply_gain">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.apply_gain">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">apply_gain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gain</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies a gain (volume change) to the audio.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            gain (int or float): The amount of gain in decibels (dB).</span>
<span class="sd">                Positive values make it louder, negative values make it quieter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">apply_gain</span><span class="p">(</span><span class="n">gain</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Audio.fade_in">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.fade_in">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fade_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fadetime</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies a fade-in to the beginning of the audio.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            fadetime (int): The duration of the fade-in (in milliseconds).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">fadetime</span><span class="p">,</span> <span class="s2">&quot;fadetime&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">fade_in</span><span class="p">(</span><span class="n">fadetime</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Audio.fade_out">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.fade_out">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fade_out</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fadetime</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies a fade-out to the end of the audio.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            fadetime (int): The duration of the fade-out (in milliseconds).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">fadetime</span><span class="p">,</span> <span class="s2">&quot;fadetime&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">fade_out</span><span class="p">(</span><span class="n">fadetime</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="Audio.fade">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.fade">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fade</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fadeintime</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fadeouttime</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies both a fade-in and a fade-out.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            fadeintime (int, optional): The duration of the fade-in</span>
<span class="sd">                (in milliseconds). Defaults to 0.</span>
<span class="sd">            fadeouttime (int, optional): The duration of the fade-out</span>
<span class="sd">                (in milliseconds). Defaults to 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">fadeintime</span><span class="p">,</span> <span class="s2">&quot;fadeintime&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="n">_check_type</span><span class="p">(</span><span class="n">fadeouttime</span><span class="p">,</span> <span class="s2">&quot;fadeouttime&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">fade_in</span><span class="p">(</span><span class="n">fadeintime</span><span class="p">)</span><span class="o">.</span><span class="n">fade_out</span><span class="p">(</span><span class="n">fadeouttime</span><span class="p">)</span></div>

        

<div class="viewcode-block" id="Audio.change_speed">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.change_speed">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">change_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the speed of the audio without changing the pitch.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor (int or float): The speed multiplier.</span>
<span class="sd">                (e.g., 2.0 is 2x speed, 0.5 is half speed).</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If &#39;factor&#39; is not an int or float.</span>
<span class="sd">            ValueError: If &#39;factor&#39; is 0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The parameter &#39;&quot;</span> <span class="o">+</span> <span class="n">factor</span> <span class="o">+</span> <span class="s2">&quot;&#39; should be a &quot;</span> <span class="o">+</span>
                        <span class="s2">&quot;int or float but instead was a &quot;</span> <span class="o">+</span>
                        <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                        <span class="s2">&quot;factor&quot;</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">factor</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">factor</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Error! Cannot change speed by a factor of 0&quot;</span><span class="p">)</span>

        <span class="n">sound_with_altered_frame_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">_spawn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">overrides</span><span class="o">=</span><span class="p">{</span>
                                        <span class="s2">&quot;frame_rate&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">frame_rate</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)})</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span> <span class="o">=</span> <span class="n">sound_with_altered_frame_rate</span><span class="o">.</span><span class="n">set_frame_rate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">frame_rate</span><span class="p">)</span></div>


<div class="viewcode-block" id="Audio.normalize">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.normalize">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_amplitude</span><span class="o">=</span><span class="n">MAX_AMPLITUDE</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Normalizes the audio to a specific peak amplitude.</span>

<span class="sd">        Adjusts the amplitude so the loudest sample (positive or negative)</span>
<span class="sd">        matches &#39;max_amplitude&#39;, scaling all other samples proportionally.</span>
<span class="sd">        This makes the audio as loud as possible without clipping.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            max_amplitude (int, optional): The target peak absolute amplitude.</span>
<span class="sd">                Defaults to MAX_AMPLITUDE (32767).</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If &#39;max_amplitude&#39; is negative or &gt; MAX_AMPLITUDE.</span>
<span class="sd">            ZeroDivisionError: If the audio is completely silent (all samples are 0).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">max_amplitude</span> <span class="o">&gt;</span> <span class="n">MAX_AMPLITUDE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Max amplitude cannot exceed 32,767.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">max_amplitude</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Max amplitude must be positive.&quot;</span><span class="p">)</span>
        
        <span class="n">sample_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">get_array_of_samples</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">sample_list</span><span class="p">)</span>
        <span class="n">smallest</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">sample_list</span><span class="p">)</span>
        <span class="n">peak</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">smallest</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">largest</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">peak</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;Audio is silent; normalization skipped.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">multiplier</span> <span class="o">=</span> <span class="n">max_amplitude</span> <span class="o">/</span> <span class="n">peak</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sample_list</span><span class="p">)):</span>
            <span class="n">sample_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sample_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">multiplier</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">from_sample_list</span><span class="p">(</span><span class="n">sample_list</span><span class="p">)</span></div>



<div class="viewcode-block" id="Audio.reverse">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.reverse">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reverses the audio.</span>

<span class="sd">        Modifies this Audio object in-place.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">from_sample_list</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">())))</span></div>


<div class="viewcode-block" id="Audio.average_amplitude">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.average_amplitude">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">average_amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end_time</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the average absolute amplitude over a time range.</span>
<span class="sd">        </span>
<span class="sd">        Note: This method uses seconds, unlike most others which use milliseconds.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_time (float, optional): The start time of the range</span>
<span class="sd">                (in seconds). Defaults to 0.</span>
<span class="sd">            end_time (float, optional): The end time of the range</span>
<span class="sd">                (in seconds). Defaults to the end of the audio.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The average absolute amplitude of the samples in the range.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If times are negative or &#39;start_time&#39; &gt;= &#39;end_time&#39;</span>
<span class="sd">                or times are outside the audio duration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sample_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">()</span>
        <span class="n">frame_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_rate</span><span class="p">()</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">())</span> <span class="o">/</span> <span class="n">frame_rate</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        
        <span class="c1"># Default to full length if end_time not given</span>
        <span class="k">if</span> <span class="n">end_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="n">duration</span>

        <span class="c1"># Verify valid start and end times</span>
        <span class="k">if</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">end_time</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Start and end times must be non-negative.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">start_time</span> <span class="o">&gt;=</span> <span class="n">end_time</span><span class="p">:</span>
           <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;start_time must be less than end_time.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">start_time</span> <span class="o">&gt;</span> <span class="n">duration</span><span class="p">:</span>
           <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;start_time (</span><span class="si">{</span><span class="n">start_time</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s) exceeds audio length (</span><span class="si">{</span><span class="n">duration</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s).&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">end_time</span> <span class="o">&gt;</span> <span class="n">duration</span><span class="p">:</span>
          <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;end_time (</span><span class="si">{</span><span class="n">end_time</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s) exceeds audio length (</span><span class="si">{</span><span class="n">duration</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s).&quot;</span><span class="p">)</span>

        <span class="c1"># Convert times to sample indices</span>
        <span class="n">start_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_time</span> <span class="o">*</span> <span class="n">frame_rate</span><span class="p">)</span>
        <span class="n">end_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_time</span> <span class="o">*</span> <span class="n">frame_rate</span><span class="p">)</span>

        <span class="c1"># Value verification</span>
        <span class="n">start_idx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">start_idx</span><span class="p">)</span>
        <span class="n">end_idx</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sample_list</span><span class="p">),</span> <span class="n">end_idx</span><span class="p">)</span>

        <span class="c1"># Slice and compute mean absolute amplitude</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">sample_list</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        
        <span class="n">avg_amp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">segment</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span> <span class="k">if</span> <span class="n">segment</span> <span class="k">else</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="n">avg_amp</span></div>

    
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<div class="viewcode-block" id="Audio.pitch_at_time">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.pitch_at_time">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">pitch_at_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mf">0.05</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the dominant frequency (pitch) at a specific time.</span>

<span class="sd">        Uses an FFT (Fast Fourier Transform) on a small window of audio</span>
<span class="sd">        around the specified time.</span>

<span class="sd">        Args:</span>
<span class="sd">            time (float): The time (in seconds) to analyze.</span>
<span class="sd">            window (float, optional): The size of the analysis window</span>
<span class="sd">                (in seconds). Defaults to 0.05 (50 milliseconds).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The estimated dominant frequency in Hz.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If &#39;time&#39; is outside the audio duration.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audioseg</span><span class="o">.</span><span class="n">get_array_of_samples</span><span class="p">()</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_rate</span><span class="p">()</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span> <span class="o">/</span> <span class="n">rate</span>

        <span class="k">if</span> <span class="n">time</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">time</span> <span class="o">&gt;</span> <span class="n">duration</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;time t must be within audio duration&quot;</span><span class="p">)</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">-</span> <span class="p">(</span><span class="n">window</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">end_time</span>   <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="p">(</span><span class="n">window</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Make sure start and end time are within the audio&#39;s duration</span>
        <span class="k">if</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> 
            <span class="n">start_time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">end_time</span> <span class="o">&gt;</span> <span class="n">duration</span><span class="p">:</span> 
            <span class="n">end_time</span> <span class="o">=</span> <span class="n">duration</span>

        <span class="n">start_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_time</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>
        <span class="n">end_idx</span>   <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_time</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>

        <span class="n">segment</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">samples</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Remove direct current offset</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">segment</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>

        <span class="c1"># FFT</span>
        <span class="n">spectrum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">spectrum</span><span class="p">),</span> <span class="n">d</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="n">rate</span><span class="p">)</span>

        <span class="c1"># Only take the positive frequencies</span>
        <span class="n">half</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
        <span class="n">magnitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">spectrum</span><span class="p">[:</span><span class="n">half</span><span class="p">])</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">freqs</span><span class="p">[:</span><span class="n">half</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">magnitudes</span><span class="p">):</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="c1"># Find the dominant frequency in the window</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">magnitudes</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="n">k</span><span class="p">])</span></div>

    
<div class="viewcode-block" id="Audio.get_amplitude_at">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.get_amplitude_at">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_amplitude_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the raw sample amplitude at a specific time.</span>

<span class="sd">        Args:</span>
<span class="sd">            time_s (float): The time (in seconds) to get the sample from.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The amplitude of the sample at that time.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If &#39;time_s&#39; is outside the audio duration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sample_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">()</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_rate</span><span class="p">()</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_s</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Timestamp outside audio duration&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sample_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span></div>


<div class="viewcode-block" id="Audio.set_amplitude_at">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.set_amplitude_at">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_amplitude_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_s</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the raw sample amplitude at a specific time.</span>

<span class="sd">        Modifies this Audio object in-place. The value will be clamped to</span>
<span class="sd">        the valid 16-bit range (MIN_AMPLITUDE to MAX_AMPLITUDE).</span>

<span class="sd">        Args:</span>
<span class="sd">            time_s (float): The time (in seconds) of the sample to set.</span>
<span class="sd">            value (int): The new amplitude value to set.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If &#39;time_s&#39; is outside the audio duration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sample_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">()</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_rate</span><span class="p">()</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time_s</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Timestamp outside audio duration&quot;</span><span class="p">)</span>

        <span class="c1"># clamp to legal sample range</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">MAX_AMPLITUDE</span><span class="p">),</span> <span class="o">-</span><span class="n">MAX_AMPLITUDE</span><span class="p">)</span>

        <span class="n">sample_list</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">from_sample_list</span><span class="p">(</span><span class="n">sample_list</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Audio.crescendo">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.crescendo">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">crescendo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">final_multiplier</span><span class="o">=</span><span class="mf">1.5</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies a crescendo (gradual volume increase) over a time range.</span>

<span class="sd">        Modifies this Audio object in-place.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_time (float, optional): The time (in seconds) to begin</span>
<span class="sd">                the crescendo. Defaults to 0.</span>
<span class="sd">            end_time (float, optional): The time (in seconds) to end</span>
<span class="sd">                the crescendo. Defaults to the end of the audio.</span>
<span class="sd">            final_multiplier (float, optional): The amplitude multiplier to</span>
<span class="sd">                reach at the end of the crescendo. (e.g., 1.5 is 1.5x louder).</span>
<span class="sd">                Defaults to 1.5.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If times are invalid or out of range.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">sample_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">()</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_frame_rate</span><span class="p">()</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sample_list</span><span class="p">)</span> <span class="o">/</span> <span class="n">rate</span>

        <span class="k">if</span> <span class="n">end_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">end_time</span> <span class="o">=</span> <span class="n">duration</span>

        <span class="c1"># Safety checks</span>
        <span class="k">if</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">end_time</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Times must be non-negative.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">end_time</span> <span class="o">&lt;=</span> <span class="n">duration</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid time range for crescendo.&quot;</span><span class="p">)</span>

        <span class="n">start_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_time</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>
        <span class="n">end_idx</span>   <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_time</span>   <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>

        <span class="n">length</span> <span class="o">=</span> <span class="n">end_idx</span> <span class="o">-</span> <span class="n">start_idx</span>
        <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c1"># nothing to do</span>

        <span class="c1"># Linearly ramp from 1.0 to final_multiplier</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
            <span class="n">progress</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># 0.0  1.0 across crescendo</span>
            <span class="n">multiplier</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="n">progress</span> <span class="o">*</span> <span class="p">(</span><span class="n">final_multiplier</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">new_val</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sample_list</span><span class="p">[</span><span class="n">start_idx</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">multiplier</span><span class="p">)</span>

            <span class="c1"># Clamp to safe 16-bit range</span>
            <span class="n">new_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">new_val</span><span class="p">,</span> <span class="n">MAX_AMPLITUDE</span><span class="p">),</span> <span class="n">MIN_AMPLITUDE</span><span class="p">)</span>
            <span class="n">sample_list</span><span class="p">[</span><span class="n">start_idx</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_val</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">from_sample_list</span><span class="p">(</span><span class="n">sample_list</span><span class="p">)</span></div>


<div class="viewcode-block" id="Audio.view">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.view">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens a GUI window to visualize this audio (waveform, FFT, etc.).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">AudioViewer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Audio.view_with">
<a class="viewcode-back" href="../api.html#cs101audio.Audio.view_with">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">view_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens a GUI window to compare this audio with another.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (Audio): The second Audio object to compare against.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If &#39;other&#39; is not an Audio object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Audio</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">The parameter &#39;&quot;</span> <span class="o">+</span> <span class="s2">&quot;other&quot;</span> <span class="o">+</span> <span class="s2">&quot;&#39; should be a &quot;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">Audio</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">+</span>
                            <span class="s2">&quot; but instead was a &quot;</span> <span class="o">+</span>
                            <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                            <span class="s2">&quot;other&quot;</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>

        <span class="n">DualAudioViewer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="AudioViewer">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AudioViewer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GUI class for displaying waveforms from an Audio object.</span>
<span class="sd">    </span>
<span class="sd">    This class opens a Tkinter window with Matplotlib plots for waveform,</span>
<span class="sd">    FFT, and spectrogram visualizations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Matplotlib Subplot Shorthand: (Rows, Columns, Plot Position)</span>
    <span class="n">FULL_PLOT_POSITION</span> <span class="o">=</span> <span class="mi">111</span> 

<div class="viewcode-block" id="AudioViewer.__init__">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_obj</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes and runs the single Audio visualization GUI.</span>

<span class="sd">        Args:</span>
<span class="sd">            audio_obj (Audio): The Audio object to visualize.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_audio</span> <span class="o">=</span> <span class="n">audio_obj</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_audio</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_audio</span><span class="o">.</span><span class="n">get_frame_rate</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;No Data&quot;</span><span class="p">,</span> <span class="s2">&quot;No samples to display.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Tkinter setup</span>
        <span class="c1"># Add audio name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Audio Viewer&quot;</span><span class="p">)</span>

        <span class="c1"># Figure + canvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">AudioViewer</span><span class="o">.</span><span class="n">FULL_PLOT_POSITION</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Controls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_controls</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>


<div class="viewcode-block" id="AudioViewer.make_controls">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.make_controls">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the control buttons and input fields for the Tkinter interface.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
        <span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Create &quot;Waveform&quot; button</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Waveform&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_waveform</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Create &quot;Zoomed Waveform&quot; button and time entiries </span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start (s):&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_start</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_start</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

        <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;End (s):&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_end</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_end</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        
        <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zoomed Waveform&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_zoom</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        
        <span class="c1"># Create &quot;Display Peak Amplitude&quot; button</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Peak Amplitude&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">show_peak</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Create button for FFT (Fast Fourier Transform) plot</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Frequency Spectrum (FFT)&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_fft</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        
        <span class="c1"># Create button for spectrogram plot</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Spectrogram&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_spectrogram</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></div>


<div class="viewcode-block" id="AudioViewer.clear_cbar">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.clear_cbar">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_cbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes the color bar created by the spectrogram if it exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if the _cbar attribute was exists AND is not None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_cbar&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Recreate the Axes: This is the critical step.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">AudioViewer</span><span class="o">.</span><span class="n">FULL_PLOT_POSITION</span><span class="p">)</span>
            <span class="c1"># Nullify the reference: Tells the class the cbar is gone.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cbar</span> <span class="o">=</span> <span class="kc">None</span> </div>


<div class="viewcode-block" id="AudioViewer.plot">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.plot">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to draw a plot on the Matplotlib canvas.</span>

<span class="sd">        Args:</span>
<span class="sd">            y (array-like): The Y-axis data (amplitude).</span>
<span class="sd">            x (array-like): The X-axis data (time in seconds).</span>
<span class="sd">            title (str): The title for the plot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_cbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time (s)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Amplitude&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span></div>


<div class="viewcode-block" id="AudioViewer.plot_waveform">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.plot_waveform">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_waveform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots the full audio waveform (Amplitude vs. Time).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;Full waveform&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AudioViewer.plot_zoom">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.plot_zoom">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots a zoomed-in portion of the waveform based on user input times.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_start</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">end</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_end</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;Invalid Input&quot;</span><span class="p">,</span> <span class="s2">&quot;Enter numeric times.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span><span class="p">):</span> <span class="c1"># check this works</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;Invalid Range&quot;</span><span class="p">,</span> <span class="s2">&quot;Out of range.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">start_idx</span><span class="p">,</span> <span class="n">end_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">end</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Zoom </span><span class="si">{</span><span class="n">start</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">end</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="AudioViewer.plot_fft">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.plot_fft">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_fft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots the frequency spectrum (FFT) of the entire audio.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Compute FFT</span>
        <span class="n">spectrum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">)</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">spectrum</span><span class="p">),</span> <span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_rate</span><span class="p">)</span>

        <span class="c1"># Only keep positive frequencies</span>
        <span class="n">positive_freqs</span> <span class="o">=</span> <span class="n">freqs</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">magnitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">spectrum</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">])</span>

        <span class="c1"># Clear and plot inside Tkinter canvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_cbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">positive_freqs</span><span class="p">,</span> <span class="n">magnitude</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Frequency (Hz)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Magnitude&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Frequency Spectrum (FFT)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="AudioViewer.plot_spectrogram">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.plot_spectrogram">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_spectrogram</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots a spectrogram (Frequency vs. Time, with amplitude as color).</span>

<span class="sd">        .. figure:: _static/spectrogram_graphic.png</span>
<span class="sd">           :width: 80%</span>
<span class="sd">           :align: left</span>
<span class="sd">           :alt: Example plot of an audio spectrogram</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_cbar</span><span class="p">()</span>
        <span class="n">Pxx</span><span class="p">,</span> <span class="n">freqs</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">im</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">specgram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rate</span><span class="p">,</span> <span class="n">NFFT</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">noverlap</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;magma&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time (s)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency (Hz)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Spectrogram&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_cbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Intensity (dB)&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span></div>


<div class="viewcode-block" id="AudioViewer.show_peak">
<a class="viewcode-back" href="../api.html#cs101audio.AudioViewer.show_peak">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">show_peak</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the peak (maximum absolute) amplitude of the audio signal</span>
<span class="sd">        and the timestamp at which it occurs.</span>
<span class="sd">        </span>
<span class="sd">        If the same peak occurs more than once, only the first time is shown.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find index of maximum absolute amplitude</span>
        <span class="n">max_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">)))</span>
        <span class="c1"># Actual max amplitude</span>
        <span class="n">max_amp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sample_list</span><span class="p">[</span><span class="n">max_index</span><span class="p">])</span>
        <span class="c1"># Convert index to timestamp (in seconds)</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">max_index</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span>

        <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span>
            <span class="s2">&quot;Max Amplitude&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;Peak amplitude: </span><span class="si">{</span><span class="n">max_amp</span><span class="si">}</span><span class="se">\n</span><span class="s2">Time: </span><span class="si">{</span><span class="n">timestamp</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> s&quot;</span>
        <span class="p">)</span></div>
</div>


<div class="viewcode-block" id="DualAudioViewer">
<a class="viewcode-back" href="../api.html#cs101audio.DualAudioViewer">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DualAudioViewer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GUI class for displaying and comparing two audio waveforms.</span>

<span class="sd">    Audio 1 is plotted in Blue, Audio 2 is plotted in Red.</span>
<span class="sd">    Provides options for full waveform and zoomed waveform comparison.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">FULL_PLOT_POSITION</span> <span class="o">=</span> <span class="mi">111</span> 

<div class="viewcode-block" id="DualAudioViewer.__init__">
<a class="viewcode-back" href="../api.html#cs101audio.DualAudioViewer.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_obj1</span><span class="p">,</span> <span class="n">audio_obj2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes and runs the dual Audio comparison GUI.</span>

<span class="sd">        Args:</span>
<span class="sd">            audio_obj1 (Audio): The first Audio object (plotted in blue).</span>
<span class="sd">            audio_obj2 (Audio): The second Audio object (plotted in red).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># --- Data Extraction and Validation ---</span>
        
        <span class="c1"># Audio 1 Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_samples1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">audio_obj1</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span> <span class="o">=</span> <span class="n">audio_obj1</span><span class="o">.</span><span class="n">get_frame_rate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name1</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">audio_obj1</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Audio 1 (Blue)&#39;</span><span class="p">)</span>
        
        <span class="c1"># Audio 2 Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_samples2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">audio_obj2</span><span class="o">.</span><span class="n">get_sample_list</span><span class="p">(),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name2</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">audio_obj2</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Audio 2 (Red)&#39;</span><span class="p">)</span>

        <span class="c1"># Basic Check</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;No Data&quot;</span><span class="p">,</span> <span class="s2">&quot;One or both audio segments are empty.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># --- Tkinter setup ---</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Dual Waveform Comparison Viewer&quot;</span><span class="p">)</span>

        <span class="c1"># Figure + canvas setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">DualAudioViewer</span><span class="o">.</span><span class="n">FULL_PLOT_POSITION</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Controls and main loop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">make_controls</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>


<div class="viewcode-block" id="DualAudioViewer.make_controls">
<a class="viewcode-back" href="../api.html#cs101audio.DualAudioViewer.make_controls">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the control buttons and input fields for the Tkinter interface.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
        <span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># 1. Full Waveform Button</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Full Waveform&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_waveform</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># 2. Zoomed Waveform Controls</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start (s):&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_start</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_start</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;End (s):&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_end</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entry_end</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        
        <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zoom Waveform&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_zoom</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        
        <span class="c1"># Legend/Color Key Display</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;darkblue&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Arial&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;bold&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_plot_dual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to draw two overlaid plots on the Matplotlib canvas.</span>

<span class="sd">        Args:</span>
<span class="sd">            y1 (array-like): The Y-axis data for the first audio (blue).</span>
<span class="sd">            y2 (array-like): The Y-axis data for the second audio (red).</span>
<span class="sd">            x (array-like): The common X-axis data (time in seconds).</span>
<span class="sd">            title (str): The title for the plot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        
        <span class="c1"># Plot Audio 1 (Blue)</span>
        <span class="c1"># We plot the data against the full time axis &#39;x&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">y1</span><span class="p">)],</span> <span class="n">y1</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name1</span><span class="p">)</span>
        
        <span class="c1"># Plot Audio 2 (Red)</span>
        <span class="c1"># The shorter line will naturally end at its last index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">y2</span><span class="p">)],</span> <span class="n">y2</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_name2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time (s)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Amplitude&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span> <span class="c1"># Show the label key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

<div class="viewcode-block" id="DualAudioViewer.plot_waveform">
<a class="viewcode-back" href="../api.html#cs101audio.DualAudioViewer.plot_waveform">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_waveform</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the complete, overlaid waveform of both audio signals.</span>

<span class="sd">        .. figure:: _static/dual_waveform_graphic.png</span>
<span class="sd">           :width: 80%</span>
<span class="sd">           :align: left</span>
<span class="sd">           :alt: Example plot of an audio waveform</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span>
        
        <span class="c1"># Use the maximum sample count for the time axis length</span>
        <span class="n">max_samples</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples1</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples2</span><span class="p">))</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">max_samples</span> <span class="o">/</span> <span class="n">rate</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">max_samples</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_samples2</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s2">&quot;Full Overlaid Waveforms&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="DualAudioViewer.plot_zoom">
<a class="viewcode-back" href="../api.html#cs101audio.DualAudioViewer.plot_zoom">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_zoom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays a zoomed-in, overlaid waveform for a specified time interval.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">start_sec</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_start</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="n">end_sec</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry_end</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;Invalid Input&quot;</span><span class="p">,</span> <span class="s2">&quot;Please enter numeric times.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rate</span>
        <span class="n">duration1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples1</span><span class="p">)</span> <span class="o">/</span> <span class="n">rate</span>
        <span class="n">duration2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples2</span><span class="p">)</span> <span class="o">/</span> <span class="n">rate</span>

        <span class="c1"># Use the duration of the longest audio for range checking</span>
        <span class="n">max_duration</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples1</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_samples2</span><span class="p">))</span> <span class="o">/</span> <span class="n">rate</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">start_sec</span> <span class="o">&lt;</span> <span class="n">end_sec</span> <span class="o">&lt;=</span> <span class="n">max_duration</span><span class="p">):</span> 
            <span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;Invalid Range&quot;</span><span class="p">,</span> 
                                  <span class="sa">f</span><span class="s2">&quot;Range must be within the longest audio duration (</span><span class="si">{</span><span class="n">max_duration</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> s).&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Calculate sample indices</span>
        <span class="n">start_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">start_sec</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>
        <span class="n">end_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">end_sec</span> <span class="o">*</span> <span class="n">rate</span><span class="p">)</span>
        
        <span class="c1"># Slice the data for both audios</span>
        <span class="n">y1_zoom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_samples1</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">]</span>
        <span class="n">y2_zoom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_samples2</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">]</span>
        
        <span class="c1"># Create the time axis for the zoomed segment</span>
        <span class="n">x_zoom</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start_sec</span><span class="p">,</span> <span class="n">end_sec</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">y1_zoom</span><span class="p">))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dual</span><span class="p">(</span><span class="n">y1_zoom</span><span class="p">,</span> <span class="n">y2_zoom</span><span class="p">,</span> <span class="n">x_zoom</span><span class="p">,</span> 
                        <span class="sa">f</span><span class="s2">&quot;Zoomed Overlaid Waveforms (</span><span class="si">{</span><span class="n">start_sec</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">end_sec</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s)&quot;</span><span class="p">)</span></div>
</div>


<span class="c1"># Dictionary for the frequncies of musical notes</span>
<span class="n">music_note_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;C0&quot;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s2">&quot;C#0&quot;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span> <span class="s2">&quot;Db0&quot;</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="s2">&quot;D0&quot;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span> <span class="s2">&quot;D#0&quot;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span> <span class="s2">&quot;Eb0&quot;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span> <span class="s2">&quot;E0&quot;</span><span class="p">:</span><span class="mi">21</span><span class="p">,</span>
                   <span class="s2">&quot;F0&quot;</span><span class="p">:</span><span class="mi">22</span><span class="p">,</span> <span class="s2">&quot;F#0&quot;</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span> <span class="s2">&quot;Gb0&quot;</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span> <span class="s2">&quot;G0&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;G#0&quot;</span><span class="p">:</span><span class="mi">26</span><span class="p">,</span> <span class="s2">&quot;Ab0&quot;</span><span class="p">:</span><span class="mi">26</span><span class="p">,</span> <span class="s2">&quot;A0&quot;</span><span class="p">:</span><span class="mi">28</span><span class="p">,</span>
                   <span class="s2">&quot;A#0&quot;</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span> <span class="s2">&quot;Bb0&quot;</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span> <span class="s2">&quot;B0&quot;</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span> <span class="s2">&quot;C1&quot;</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span> <span class="s2">&quot;C#1&quot;</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;Db1&quot;</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;D1&quot;</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span>
                   <span class="s2">&quot;D#1&quot;</span><span class="p">:</span><span class="mi">39</span><span class="p">,</span> <span class="s2">&quot;E1&quot;</span><span class="p">:</span><span class="mi">41</span><span class="p">,</span> <span class="s2">&quot;F1&quot;</span><span class="p">:</span><span class="mi">44</span><span class="p">,</span> <span class="s2">&quot;F#1&quot;</span><span class="p">:</span><span class="mi">46</span><span class="p">,</span> <span class="s2">&quot;Gb1&quot;</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span> <span class="s2">&quot;G1&quot;</span><span class="p">:</span> <span class="mi">49</span><span class="p">,</span> <span class="s2">&quot;G#1&quot;</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span>
                   <span class="s2">&quot;Ab1&quot;</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span> <span class="s2">&quot;A1&quot;</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span> <span class="s2">&quot;A#1&quot;</span><span class="p">:</span><span class="mi">58</span><span class="p">,</span> <span class="s2">&quot;Bb1&quot;</span><span class="p">:</span><span class="mi">58</span><span class="p">,</span> <span class="s2">&quot;B1&quot;</span><span class="p">:</span><span class="mi">62</span><span class="p">,</span> <span class="s2">&quot;C2&quot;</span><span class="p">:</span><span class="mi">65</span><span class="p">,</span> <span class="s2">&quot;C#2&quot;</span><span class="p">:</span><span class="mi">69</span><span class="p">,</span>
                   <span class="s2">&quot;Db2&quot;</span><span class="p">:</span><span class="mi">69</span><span class="p">,</span> <span class="s2">&quot;D2&quot;</span><span class="p">:</span><span class="mi">73</span><span class="p">,</span> <span class="s2">&quot;D#2&quot;</span><span class="p">:</span><span class="mi">78</span><span class="p">,</span> <span class="s2">&quot;Eb2&quot;</span><span class="p">:</span><span class="mi">78</span><span class="p">,</span> <span class="s2">&quot;E2&quot;</span><span class="p">:</span><span class="mi">82</span><span class="p">,</span> <span class="s2">&quot;F2&quot;</span><span class="p">:</span><span class="mi">87</span><span class="p">,</span> <span class="s2">&quot;F#2&quot;</span><span class="p">:</span><span class="mi">92</span><span class="p">,</span> <span class="s2">&quot;Gb2&quot;</span><span class="p">:</span><span class="mi">92</span><span class="p">,</span>
                   <span class="s2">&quot;G2&quot;</span><span class="p">:</span><span class="mi">98</span><span class="p">,</span> <span class="s2">&quot;G#2&quot;</span><span class="p">:</span><span class="mi">104</span><span class="p">,</span> <span class="s2">&quot;Ab2&quot;</span><span class="p">:</span><span class="mi">104</span><span class="p">,</span> <span class="s2">&quot;A2&quot;</span><span class="p">:</span><span class="mi">110</span><span class="p">,</span> <span class="s2">&quot;A#2&quot;</span><span class="p">:</span><span class="mi">116</span><span class="p">,</span> <span class="s2">&quot;Bb2&quot;</span><span class="p">:</span><span class="mi">116</span><span class="p">,</span> <span class="s2">&quot;B2&quot;</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span>
                   <span class="s2">&quot;C3&quot;</span><span class="p">:</span><span class="mi">131</span><span class="p">,</span> <span class="s2">&quot;C#3&quot;</span><span class="p">:</span><span class="mi">139</span><span class="p">,</span> <span class="s2">&quot;Db3&quot;</span><span class="p">:</span><span class="mi">139</span><span class="p">,</span> <span class="s2">&quot;D3&quot;</span><span class="p">:</span><span class="mi">147</span><span class="p">,</span> <span class="s2">&quot;D#3&quot;</span><span class="p">:</span><span class="mi">156</span><span class="p">,</span> <span class="s2">&quot;Eb3&quot;</span><span class="p">:</span><span class="mi">156</span><span class="p">,</span><span class="s2">&quot;E3&quot;</span><span class="p">:</span><span class="mi">165</span><span class="p">,</span>
                   <span class="s2">&quot;F3&quot;</span><span class="p">:</span><span class="mi">175</span><span class="p">,</span> <span class="s2">&quot;F#3&quot;</span><span class="p">:</span><span class="mi">185</span><span class="p">,</span> <span class="s2">&quot;Gb3&quot;</span><span class="p">:</span> <span class="mi">185</span><span class="p">,</span> <span class="s2">&quot;G3&quot;</span><span class="p">:</span><span class="mi">196</span><span class="p">,</span> <span class="s2">&quot;G#3&quot;</span><span class="p">:</span><span class="mi">208</span><span class="p">,</span> <span class="s2">&quot;Ab3&quot;</span><span class="p">:</span><span class="mi">208</span><span class="p">,</span> <span class="s2">&quot;A3&quot;</span><span class="p">:</span><span class="mi">220</span><span class="p">,</span>
                   <span class="s2">&quot;A#3&quot;</span><span class="p">:</span><span class="mi">233</span><span class="p">,</span> <span class="s2">&quot;Bb3&quot;</span><span class="p">:</span><span class="mi">233</span><span class="p">,</span> <span class="s2">&quot;B3&quot;</span><span class="p">:</span><span class="mi">247</span><span class="p">,</span> <span class="s2">&quot;C4&quot;</span><span class="p">:</span><span class="mi">262</span><span class="p">,</span> <span class="s2">&quot;C#4&quot;</span><span class="p">:</span><span class="mi">277</span><span class="p">,</span> <span class="s2">&quot;Db4&quot;</span><span class="p">:</span><span class="mi">277</span><span class="p">,</span> <span class="s2">&quot;D4&quot;</span><span class="p">:</span><span class="mi">294</span><span class="p">,</span>
                   <span class="s2">&quot;D#4&quot;</span><span class="p">:</span><span class="mi">311</span><span class="p">,</span> <span class="s2">&quot;Eb4&quot;</span><span class="p">:</span><span class="mi">311</span><span class="p">,</span> <span class="s2">&quot;E4&quot;</span><span class="p">:</span><span class="mi">330</span><span class="p">,</span> <span class="s2">&quot;F4&quot;</span><span class="p">:</span><span class="mi">349</span><span class="p">,</span> <span class="s2">&quot;F#4&quot;</span><span class="p">:</span><span class="mi">370</span><span class="p">,</span> <span class="s2">&quot;Gb4&quot;</span><span class="p">:</span><span class="mi">370</span><span class="p">,</span> <span class="s2">&quot;G4&quot;</span><span class="p">:</span><span class="mi">392</span><span class="p">,</span>
                   <span class="s2">&quot;G#4&quot;</span><span class="p">:</span><span class="mi">415</span><span class="p">,</span> <span class="s2">&quot;Ab4&quot;</span><span class="p">:</span><span class="mi">415</span><span class="p">,</span> <span class="s2">&quot;A4&quot;</span><span class="p">:</span><span class="mi">440</span><span class="p">,</span> <span class="s2">&quot;A#4&quot;</span><span class="p">:</span><span class="mi">466</span><span class="p">,</span> <span class="s2">&quot;Bb4&quot;</span><span class="p">:</span><span class="mi">466</span><span class="p">,</span> <span class="s2">&quot;B4&quot;</span><span class="p">:</span> <span class="mi">494</span><span class="p">,</span> <span class="s2">&quot;C5&quot;</span><span class="p">:</span><span class="mi">523</span><span class="p">,</span>
                   <span class="s2">&quot;C#5&quot;</span><span class="p">:</span><span class="mi">554</span><span class="p">,</span> <span class="s2">&quot;Db5&quot;</span><span class="p">:</span><span class="mi">554</span><span class="p">,</span> <span class="s2">&quot;D5&quot;</span><span class="p">:</span><span class="mi">587</span><span class="p">,</span> <span class="s2">&quot;D#5&quot;</span><span class="p">:</span><span class="mi">622</span><span class="p">,</span> <span class="s2">&quot;Eb5&quot;</span><span class="p">:</span><span class="mi">622</span><span class="p">,</span> <span class="s2">&quot;E5&quot;</span><span class="p">:</span><span class="mi">659</span><span class="p">,</span> <span class="s2">&quot;F5&quot;</span><span class="p">:</span><span class="mi">699</span><span class="p">,</span>
                   <span class="s2">&quot;F#5&quot;</span><span class="p">:</span><span class="mi">740</span><span class="p">,</span> <span class="s2">&quot;Gb5&quot;</span><span class="p">:</span><span class="mi">740</span><span class="p">,</span> <span class="s2">&quot;G5&quot;</span><span class="p">:</span><span class="mi">784</span><span class="p">,</span> <span class="s2">&quot;G#5&quot;</span><span class="p">:</span><span class="mi">831</span><span class="p">,</span> <span class="s2">&quot;Ab5&quot;</span><span class="p">:</span><span class="mi">831</span><span class="p">,</span> <span class="s2">&quot;A5&quot;</span><span class="p">:</span><span class="mi">880</span><span class="p">,</span> <span class="s2">&quot;A#5&quot;</span><span class="p">:</span><span class="mi">932</span><span class="p">,</span>
                   <span class="s2">&quot;Bb5&quot;</span><span class="p">:</span><span class="mi">932</span><span class="p">,</span> <span class="s2">&quot;B5&quot;</span><span class="p">:</span><span class="mi">988</span><span class="p">,</span> <span class="s2">&quot;C6&quot;</span><span class="p">:</span><span class="mi">1047</span><span class="p">,</span> <span class="s2">&quot;C#6&quot;</span><span class="p">:</span><span class="mi">1109</span><span class="p">,</span> <span class="s2">&quot;Db6&quot;</span><span class="p">:</span><span class="mi">1109</span><span class="p">,</span> <span class="s2">&quot;D6&quot;</span><span class="p">:</span><span class="mi">1175</span><span class="p">,</span> <span class="s2">&quot;D#6&quot;</span><span class="p">:</span><span class="mi">1245</span><span class="p">,</span>
                   <span class="s2">&quot;Eb6&quot;</span><span class="p">:</span><span class="mi">1245</span><span class="p">,</span> <span class="s2">&quot;E6&quot;</span><span class="p">:</span><span class="mi">1319</span><span class="p">,</span> <span class="s2">&quot;F6&quot;</span><span class="p">:</span><span class="mi">1397</span><span class="p">,</span> <span class="s2">&quot;F#6&quot;</span><span class="p">:</span><span class="mi">1480</span><span class="p">,</span> <span class="s2">&quot;Gb6&quot;</span><span class="p">:</span><span class="mi">1480</span><span class="p">,</span> <span class="s2">&quot;G6&quot;</span><span class="p">:</span><span class="mi">1568</span><span class="p">,</span> <span class="s2">&quot;G#6&quot;</span><span class="p">:</span><span class="mi">1661</span><span class="p">,</span>
                   <span class="s2">&quot;Ab6&quot;</span><span class="p">:</span><span class="mi">1664</span><span class="p">,</span> <span class="s2">&quot;A6&quot;</span><span class="p">:</span><span class="mi">1760</span><span class="p">,</span> <span class="s2">&quot;A#6&quot;</span><span class="p">:</span><span class="mi">1865</span><span class="p">,</span> <span class="s2">&quot;Bb6&quot;</span><span class="p">:</span><span class="mi">1865</span><span class="p">,</span> <span class="s2">&quot;B6&quot;</span><span class="p">:</span><span class="mi">1976</span><span class="p">,</span> <span class="s2">&quot;C7&quot;</span><span class="p">:</span><span class="mi">2093</span><span class="p">,</span> <span class="s2">&quot;C#7&quot;</span><span class="p">:</span><span class="mi">2217</span><span class="p">,</span>
                   <span class="s2">&quot;Db7&quot;</span><span class="p">:</span><span class="mi">2217</span><span class="p">,</span> <span class="s2">&quot;D7&quot;</span><span class="p">:</span><span class="mi">2349</span><span class="p">,</span> <span class="s2">&quot;D#7&quot;</span><span class="p">:</span><span class="mi">2489</span><span class="p">,</span> <span class="s2">&quot;Eb7&quot;</span><span class="p">:</span><span class="mi">2489</span><span class="p">,</span> <span class="s2">&quot;E7&quot;</span><span class="p">:</span><span class="mi">2637</span><span class="p">,</span> <span class="s2">&quot;F7&quot;</span><span class="p">:</span><span class="mi">2794</span><span class="p">,</span> <span class="s2">&quot;F#7&quot;</span><span class="p">:</span><span class="mi">2960</span><span class="p">,</span>
                   <span class="s2">&quot;Gb7&quot;</span><span class="p">:</span><span class="mi">2960</span><span class="p">,</span> <span class="s2">&quot;G7&quot;</span><span class="p">:</span><span class="mi">3136</span><span class="p">,</span> <span class="s2">&quot;G#7&quot;</span><span class="p">:</span><span class="mi">3322</span><span class="p">,</span> <span class="s2">&quot;Ab7&quot;</span><span class="p">:</span><span class="mi">3322</span><span class="p">,</span> <span class="s2">&quot;A7&quot;</span><span class="p">:</span><span class="mi">3520</span><span class="p">,</span> <span class="s2">&quot;A#7&quot;</span><span class="p">:</span><span class="mi">3729</span><span class="p">,</span> <span class="s2">&quot;Bb7&quot;</span><span class="p">:</span><span class="mi">3729</span><span class="p">,</span>
                   <span class="s2">&quot;B7&quot;</span><span class="p">:</span><span class="mi">3951</span><span class="p">,</span> <span class="s2">&quot;C8&quot;</span><span class="p">:</span><span class="mi">4186</span><span class="p">,</span> <span class="s2">&quot;C#8&quot;</span><span class="p">:</span><span class="mi">4435</span><span class="p">,</span> <span class="s2">&quot;Db8&quot;</span><span class="p">:</span><span class="mi">4435</span><span class="p">,</span> <span class="s2">&quot;D8&quot;</span><span class="p">:</span><span class="mi">4699</span><span class="p">,</span> <span class="s2">&quot;D#8&quot;</span><span class="p">:</span><span class="mi">4978</span><span class="p">,</span> <span class="s2">&quot;Eb8&quot;</span><span class="p">:</span><span class="mi">4978</span><span class="p">,</span>
                   <span class="s2">&quot;E8&quot;</span><span class="p">:</span><span class="mi">5274</span><span class="p">,</span> <span class="s2">&quot;F8&quot;</span><span class="p">:</span><span class="mi">5588</span><span class="p">,</span> <span class="s2">&quot;F#8&quot;</span><span class="p">:</span><span class="mi">5920</span><span class="p">,</span> <span class="s2">&quot;Gb8&quot;</span><span class="p">:</span><span class="mi">5920</span><span class="p">,</span> <span class="s2">&quot;G8&quot;</span><span class="p">:</span><span class="mi">6272</span><span class="p">,</span> <span class="s2">&quot;G#8&quot;</span><span class="p">:</span><span class="mi">6645</span><span class="p">,</span> <span class="s2">&quot;Ab8&quot;</span><span class="p">:</span><span class="mi">6645</span><span class="p">,</span>
                   <span class="s2">&quot;A8&quot;</span><span class="p">:</span><span class="mi">7040</span><span class="p">,</span> <span class="s2">&quot;A#8&quot;</span><span class="p">:</span><span class="mi">7459</span><span class="p">,</span> <span class="s2">&quot;B8&quot;</span><span class="p">:</span><span class="mi">7902</span><span class="p">}</span>
<span class="sd">&quot;&quot;&quot;A dictionary mapping musical note names (e.g., &quot;A4&quot;) to frequencies (in Hz).&quot;&quot;&quot;</span>



<div class="viewcode-block" id="generate_music_note">
<a class="viewcode-back" href="../api.html#cs101audio.generate_music_note">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">generate_music_note</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">wavetype</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span> <span class="c1">#MAKE THIS ANOTHER CONSTRUCTOR?? ASK CLIENT</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a single musical note as a new Audio object.</span>

<span class="sd">    Args:</span>
<span class="sd">        note (str): The note to generate (e.g., &quot;A4&quot;, &quot;C#5&quot;, &quot;Eb3&quot;).</span>
<span class="sd">            Case-insensitive.</span>
<span class="sd">        duration (int): The duration of the note in milliseconds.</span>
<span class="sd">        wavetype (str): The type of wave (&quot;Sine&quot;, &quot;Square&quot;, &quot;Sawtooth&quot;,</span>
<span class="sd">            or &quot;Triangle&quot;). Case-insensitive.</span>
<span class="sd">        gain (int or float, optional): Gain to apply in decibels (dB).</span>
<span class="sd">            Defaults to 0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Audio: A new Audio object containing the note.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the &#39;note&#39; or &#39;wavetype&#39; is invalid.</span>
<span class="sd">        TypeError: If parameters are not of the correct type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_check_type</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="s2">&quot;note&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">_check_type</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">_check_type</span><span class="p">(</span><span class="n">wavetype</span><span class="p">,</span> <span class="s2">&quot;wavetype&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">note</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">note</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">freq</span> <span class="o">=</span> <span class="n">music_note_dict</span><span class="p">[</span><span class="n">note</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Error! Invalid note </span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">note</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> passed to generate_music_note&quot;</span><span class="p">)</span>

    <span class="n">audio_result</span> <span class="o">=</span> <span class="n">Audio</span><span class="p">()</span>

    <span class="n">audio_result</span><span class="o">.</span><span class="n">from_generator</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">wavetype</span><span class="p">)</span>

    <span class="n">audio_result</span><span class="o">.</span><span class="n">fade</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">audio_result</span><span class="o">.</span><span class="n">apply_gain</span><span class="p">(</span><span class="n">gain</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">audio_result</span></div>


<span class="c1"># CITE: ChatGPT for AudioViewer outline</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Your Name.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>